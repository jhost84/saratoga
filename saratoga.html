<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exacta AI - Saratoga Handicapping Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&family=Poppins:wght@600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <!-- Chosen Palette: Paddock Stone -->
    <!-- Application Structure Plan: A user-centric dashboard design. The app opens with a "Card Summary" section highlighting the day's most actionable bets (Prime Bet, Top Value, Key Single, Top Fades). This immediately provides top-level insights. Each summary card is interactive, linking to the full race analysis below. The main content is a "Race-by-Race Deep Dive" section, controlled by a tab-like navigation bar (Race 1-10). This structure allows users to either get a quick overview or explore individual races in depth, which is more intuitive than a simple linear report. This non-linear approach prioritizes user discovery of key betting opportunities. -->
    <!-- Visualization & Content Choices: 
        - Report Info: Full Card Summary -> Goal: Inform/Summarize -> Viz: Interactive HTML cards -> Interaction: Click to scroll -> Justification: Provides a high-level entry point to the day's best bets.
        - Report Info: Pace Projection -> Goal: Inform/Organize -> Viz: HTML/CSS diagram with icons -> Interaction: Static -> Justification: Visually communicates the complex pace scenario more effectively than a block of text.
        - Report Info: Probability vs. Price table -> Goal: Compare/Analyze -> Viz: Chart.js Bar Chart -> Interaction: Hover tooltips -> Justification: Instantly visualizes the value gap (overlay/underlay), which is the core thesis of the report.
        - Report Info: Detailed Horse Analysis -> Goal: Inform/Organize -> Viz: Collapsible HTML sections -> Interaction: Click to expand/collapse -> Justification: Prevents information overload and allows users to focus on specific horses of interest.
        - Library/Method: Chart.js for charts, Tailwind CSS for layout and diagrams.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Roboto', sans-serif;
            background-color: #f0f2f5;
            color: #334155;
        }
        .font-poppins {
            font-family: 'Poppins', sans-serif;
        }
        .pro-card {
            background: #ffffff;
            border: 1px solid #e2e8f0;
            border-radius: 0.75rem;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
        }
        .pro-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }
        .race-nav-btn {
            transition: all 0.2s ease-in-out;
            color: #334155;
            border-bottom: 3px solid transparent;
            padding: 0.75rem 1rem;
        }
        .race-nav-btn.active {
            color: #0d47a1;
            border-bottom-color: #42a5f5;
        }
        .race-nav-btn:not(.active):hover {
            background-color: #e3f2fd;
        }
        .pace-tag {
            display: inline-flex;
            align-items: center;
            gap: 0.4rem;
            padding: 0.3rem 0.8rem;
            border-radius: 9999px;
            font-weight: 600;
            font-size: 0.8rem;
        }
        .pace-duel { background-color: #ffebee; color: #c62828; }
        .pace-contested { background-color: #fff8e1; color: #f9a825; }
        .pace-void { background-color: #e3f2fd; color: #1565c0; }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
        .lucide {
            width: 22px;
            height: 22px;
        }
        .header-btn {
            transition: all 0.2s ease-in-out;
        }
        .race-link-card {
            background-color: #ffffff;
            border: 1px solid #e2e8f0;
            border-radius: 0.5rem;
            padding: 1rem;
            text-align: center;
            font-weight: 600;
            color: #0d47a1;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
        }
        .race-link-card:hover {
            background-color: #0d47a1;
            color: #ffffff;
            transform: scale(1.05);
        }
        .wager-table th, .wager-table td {
            padding: 0.75rem 0.5rem;
            text-align: left;
            border-bottom: 1px solid #e2e8f0;
        }
        .wager-table th {
            font-size: 0.8rem;
            font-weight: 600;
            color: #475569;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        .wager-table tr:last-child td {
            border-bottom: none;
        }
        .wager-table td {
            font-size: 0.9rem;
            color: #334155;
        }
        .confidence-high { background-color: #e8f5e9; }
        .confidence-medium { background-color: #fffde7; }
    </style>
</head>
<body>

    <header class="bg-white border-b border-gray-200 py-3 sticky top-0 z-20">
        <div class="container mx-auto px-4 flex justify-between items-center">
            <div class="flex items-center gap-4">
                <div>
                    <h1 class="text-2xl font-bold text-[#0d47a1] font-poppins">Saratoga Race Course</h1>
                    <p class="text-md text-gray-500">Value-Driven Insights for August 10, 2025</p>
                </div>
            </div>
            <div class="flex items-center gap-2">
                <a href="index.html" onclick="showHome(); event.preventDefault();" class="header-btn flex items-center gap-2 px-4 py-2 rounded-lg font-semibold text-white bg-[#0d47a1] hover:bg-[#1565c0]">
                    <i data-lucide="layout-dashboard" class="h-5 w-5"></i>
                    Home
                </a>
                <a href="#" onclick="showHome(); event.preventDefault();" class="header-btn flex items-center gap-2 px-4 py-2 rounded-lg font-semibold text-white bg-[#0d47a1] hover:bg-[#1565c0]">
                    <i data-lucide="layout-dashboard" class="h-5 w-5"></i>
                    Dashboard
                </a>
            </div>
        </div>
    </header>

    <main class="container mx-auto p-4 md:p-6">
        
        <div id="home-page">
            <section id="executive-summary" class="mb-10">
                <h2 class="text-2xl font-poppins font-bold mb-5 text-center text-[#0d47a1]">Executive Summary</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-5">
                    
                    <div class="pro-card p-5 text-center cursor-pointer" onclick="showRace(3)">
                        <div class="flex flex-col items-center">
                            <div class="bg-green-100 text-green-700 rounded-full p-3 mb-3">
                                <i data-lucide="star" class="lucide"></i>
                            </div>
                            <h3 class="font-poppins font-semibold text-lg text-[#0d47a1] mb-1">Prime Bet (A-Grade)</h3>
                            <p class="text-gray-800 font-semibold">Race 3, #6 Irish Gent (ire)</p>
                            <p class="text-sm text-gray-500 mt-1">Strongest value overlay on the card.</p>
                        </div>
                    </div>
                    
                    <div class="pro-card p-5 text-center cursor-pointer" onclick="showRace(10)">
                        <div class="flex flex-col items-center">
                            <div class="bg-blue-100 text-blue-700 rounded-full p-3 mb-3">
                                <i data-lucide="target" class="lucide"></i>
                            </div>
                            <h3 class="font-poppins font-semibold text-lg text-[#0d47a1] mb-1">Key Single</h3>
                            <p class="text-gray-800 font-semibold">Race 10, #2 Classicist</p>
                            <p class="text-sm text-gray-500 mt-1">Most probable winner of the day.</p>
                        </div>
                    </div>
                    
                    <div class="pro-card p-5 text-center">
                         <div class="flex flex-col items-center">
                            <div class="bg-yellow-100 text-yellow-700 rounded-full p-3 mb-3">
                                <i data-lucide="lightbulb" class="lucide"></i>
                            </div>
                            <h3 class="font-poppins font-semibold text-lg text-[#0d47a1] mb-1">Value Plays (B-Grade)</h3>
                            <ul class="text-gray-600 mt-2 space-y-2 text-sm">
                                <li class="cursor-pointer hover:text-blue-600 font-medium" onclick="showRace(1)"><strong>R1, #7 Momentum Files</strong></li>
                                <li class="cursor-pointer hover:text-blue-600 font-medium" onclick="showRace(7)"><strong>R7, #8 Five To Two</strong></li>
                                <li class="cursor-pointer hover:text-blue-600 font-medium" onclick="showRace(9)"><strong>R9, #6 No Evidence</strong></li>
                            </ul>
                        </div>
                    </div>

                    <div class="pro-card p-5 text-center">
                        <div class="flex flex-col items-center">
                            <div class="bg-red-100 text-red-700 rounded-full p-3 mb-3">
                                <i data-lucide="thumbs-down" class="lucide"></i>
                            </div>
                            <h3 class="font-poppins font-semibold text-lg text-[#0d47a1] mb-1">Top Fades</h3>
                            <ul class="text-gray-600 mt-2 space-y-2 text-sm">
                                <li class="cursor-pointer hover:text-blue-600 font-medium" onclick="showRace(3)"><strong>R3, #9 Caribbean Wind</strong></li>
                                <li class="cursor-pointer hover:text-blue-600 font-medium" onclick="showRace(9)"><strong>R9, #9 Governor Sam</strong></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <section id="multi-race-summary" class="mb-10">
                <h2 class="text-2xl font-poppins font-bold mb-5 text-center text-[#0d47a1]">Multirace & Daily Double Strategy</h2>
                <div class="grid grid-cols-1 xl:grid-cols-2 gap-8">
                    <div id="horizontal-wagers-container"></div>
                    <div id="daily-doubles-container"></div>
                </div>
            </section>
            <section id="race-navigation-home">
                 <h2 class="text-2xl font-poppins font-bold mb-5 text-center text-[#0d47a1]">Race-by-Race Analysis</h2>
                 <div id="race-link-container" class="grid grid-cols-2 md:grid-cols-5 lg:grid-cols-10 gap-3">
                 </div>
            </section>
        </div>

        <div id="race-page" class="hidden">
            <nav class="bg-white rounded-lg shadow-sm mb-8 border border-gray-200">
                <div id="race-nav-container" class="flex flex-wrap justify-center">
                </div>
            </nav>
            <div id="race-details-container"></div>
        </div>

    </main>

    <footer class="text-center p-6 mt-8 text-gray-500 text-sm border-t border-gray-200">
        <p>This interactive dashboard is for informational and entertainment purposes only. Please wager responsibly.</p>
    </footer>

    <script>
        const raceData = {
            1: {
                meta: "Race 1: Maiden Special Weight, 1 Mile (Dirt), $100,000 Purse",
                pace: { type: "Moderately Contested", class: "pace-contested", text: "Multiple runners prefer to be on or near the lead, ensuring an honest test." },
                thesis: "A moderately contested pace will unfold, likely led by #7 Momentum Files and pressured by #4 Chillax. This scenario will favor a horse sitting a stalking trip just off the leaders.",
                spoiler: "One of the speed horses, likely #7 Momentum Files, clears the field easily and gets an uncontested lead.",
                chart: {
                    labels: ['#7 Momentum Files', '#1/#1A Entry'],
                    implied: [20.0, 33.3],
                    assessed: [25.0, 25.0]
                },
                wagers: {
                    primary: "Win/Place wager on #7 Momentum Files at odds of 4-1 or higher.",
                    exotics: "Exacta Box: 1A, 3, 4, 7.",
                    horizontal: "A: 1A, 4; B: 3, 7; C: 1, 5"
                }
            },
            2: {
                meta: "Race 2: Claiming, 1 1/8 Miles (Dirt), $48,000 Purse",
                pace: { type: "Moderately Contested", class: "pace-contested", text: "A combination of pace-pressers should ensure an honest pace." },
                thesis: "A moderately contested pace, set by #7 Who's The King and pressured by #2 Mr. Ripple, will set the table for a mid-pack runner or closer.",
                spoiler: "The #1 Le Gris, taking a massive class drop, reverts to his best form and simply outclasses this field.",
                chart: {
                    labels: ['#6 Leftembehind', '#1 Le Gris'],
                    implied: [18.2, 33.3],
                    assessed: [25.0, 28.0]
                },
                wagers: {
                    primary: "Win/Place wager on #6 Leftembehind.",
                    exotics: "Exacta Box: 1, 2, 6, 7. Trifecta: 6 with 1,2,7 with 1,2,7.",
                    horizontal: "A: 1, 6; B: 2, 7; C: 5"
                }
            },
            3: {
                meta: "Race 3: Allowance, 5 1/2 Furlongs (Turf), $110,000 Purse",
                pace: { type: "Pressured Duel", class: "pace-duel", text: "This race is loaded with early speed, virtually guaranteeing a fast, energy-depleting pace." },
                thesis: "A destructive pace duel between #5 Waralo and #9 Caribbean Wind will set the race up for a stalker or closer.",
                spoiler: "#9 Caribbean Wind is exceptionally fast and clears the field from the inside post, shaking loose to an uncontested lead.",
                chart: {
                    labels: ['#6 Irish Gent (ire)', '#9 Caribbean Wind'],
                    implied: [25.0, 35.7],
                    assessed: [35.0, 20.0]
                },
                wagers: {
                    primary: "Win wager on #6 Irish Gent (ire).",
                    exotics: "Exacta: 6 over 2, 5, 7. Trifecta: 6 with 2,5,7 with 2,5,7,9.",
                    horizontal: "A: 6; B: 2, 5; C: 7, 9"
                }
            },
            4: {
                meta: "Race 4: Maiden Special Weight, 1 1/16 Miles (Turf), $100,000 Purse",
                pace: { type: "Pace Void (Slow)", class: "pace-void", text: "A field of inexperienced two-year-olds lacks a clear speed horse, strongly favoring horses on or near the lead." },
                thesis: "A slow pace (Pace Void) will develop, giving a decisive advantage to horses on or near the lead.",
                spoiler: "Several first-time starters show unexpected speed, leading to a contested pace that sets up for a closer.",
                chart: {
                    labels: ["#3 Heeere's Johnny", '#5 Final Score'],
                    implied: [25.0, 28.6],
                    assessed: [30.0, 25.0]
                },
                wagers: {
                    primary: "Win wager on #3 Heeere's Johnny.",
                    exotics: "Exacta Box: 2, 3, 5.",
                    horizontal: "A: 2, 3; B: 5; C: 4, 7"
                }
            },
            5: {
                meta: "Race 5: Maiden Special Weight, 6 1/2 Furlongs (Dirt), $100,000 Purse",
                pace: { type: "Moderately Contested", class: "pace-contested", text: "Experienced #5 will be challenged by fast-working first-timers." },
                thesis: "The experienced #5 Essential Coffee will be challenged for the lead by the fast-working first-time starter #8 So Vain, setting up a contested pace.",
                spoiler: "#5 Essential Coffee bounces back to her debut form and proves to be a class above these maidens.",
                chart: {
                    labels: ['#4 Memorized', '#8 So Vain'],
                    implied: [25.0, 28.6],
                    assessed: [30.0, 25.0]
                },
                wagers: {
                    primary: "Win wager on #4 Memorized.",
                    exotics: "Exacta Box: 4, 5, 6, 8.",
                    horizontal: "A: 4, 8; B: 5, 6; C: 3"
                }
            },
            6: {
                meta: "Race 6: Maiden Claiming, 1 1/16 Miles (Turf), $50,000 Purse",
                pace: { type: "Moderately Contested", class: "pace-contested", text: "Dirt speed stretching out on turf should ensure an honest pace." },
                thesis: "The class-dropping #12 Spirit Of The Law projects to get a favorable stalking trip and prove superior to this field.",
                spoiler: "#4 Powered By Coal takes to the turf unexpectedly well and wires the field on an easy lead.",
                chart: {
                    labels: ["#5 Arch's Assault", '#12 Spirit Of The Law'],
                    implied: [16.7, 28.6],
                    assessed: [20.0, 35.0]
                },
                wagers: {
                    primary: "Win wager on #12 Spirit Of The Law.",
                    exotics: "Exacta Box: 4, 5, 9, 12.",
                    horizontal: "A: 12; B: 4, 5, 9; C: 16"
                }
            },
            7: {
                meta: "Race 7: Claiming, 6 1/2 Furlongs (Dirt), $38,000 Purse",
                pace: { type: "Pressured Duel", class: "pace-duel", text: "Significant amount of early speed signed on points to a fast, contested pace." },
                thesis: "A contested pace will set the race up for a closer, with #8 Five To Two being the prime beneficiary.",
                spoiler: "#3 My Two Sophia's proves to be the 'speed of the speed,' clears the field easily, and wires them.",
                chart: {
                    labels: ['#8 Five To Two', "#3 My Two Sophia's"],
                    implied: [18.2, 33.3],
                    assessed: [25.0, 25.0]
                },
                wagers: {
                    primary: "Win wager on #8 Five To Two.",
                    exotics: "Exacta: 8 over 1a, 3, 9.",
                    horizontal: "A: 8; B: 1a, 3, 9; C: 6"
                }
            },
            8: {
                meta: "Race 8: Allowance Optional Claiming, 1 1/8 Miles (Turf), $100,000 Purse",
                pace: { type: "Moderately Contested", class: "pace-contested", text: "A confirmed front-runner with tactical pressers should lead to a fair pace." },
                thesis: "A fair pace will allow the class of the field to rise to the top. The #8 Conman projects to get a perfect stalking trip and prove best.",
                spoiler: "The #5 Coinage gets an unexpectedly easy lead and wires the field.",
                chart: {
                    labels: ['#6 Russian Realm', '#8 Conman'],
                    implied: [14.3, 33.3],
                    assessed: [18.0, 30.0]
                },
                wagers: {
                    primary: "Win wager on #8 Conman.",
                    exotics: "Exacta Box: 1, 6, 7, 8.",
                    horizontal: "A: 8; B: 1, 6, 7; C: 11"
                }
            },
            9: {
                meta: "Race 9: Grade 3 Mahony Stakes, 5 1/2 Furlongs (Turf), $175,000 Purse",
                pace: { type: "Pressured Duel", class: "pace-duel", text: "The exceptionally fast favorite will face challenges from other high-speed runners." },
                thesis: "A fast pace, led by #9 Governor Sam, will set the race up for a stalker or closer. The #6 No Evidence is poised to get a perfect trip.",
                spoiler: "#9 Governor Sam is simply too fast and too good, clearing the field and winning impressively.",
                chart: {
                    labels: ['#6 No Evidence', '#9 Governor Sam'],
                    implied: [11.1, 50.0],
                    assessed: [20.0, 40.0]
                },
                wagers: {
                    primary: "Win/Place wager on #6 No Evidence.",
                    exotics: "Exacta Box: 6, 9. Exacta: 6 over 3, 5, 8, 9.",
                    horizontal: "A: 9; B: 6; C: 3, 5"
                }
            },
            10: {
                meta: "Race 10: Allowance, 1 1/8 Miles (Dirt), $110,000 Purse",
                pace: { type: "Moderately Contested", class: "pace-contested", text: "Pace-setter with tactical pressers projects an honest pace." },
                thesis: "The #2 Classicist is the most likely winner, possessing the best recent speed figure and top connections. He projects to get a perfect stalking trip.",
                spoiler: "#1 Tuscan Gold returns from the layoff in top form and proves to be the class of the field.",
                chart: {
                    labels: ['#7 Chileno', '#2 Classicist'],
                    implied: [14.3, 25.0],
                    assessed: [18.0, 35.0]
                },
                wagers: {
                    primary: "Win wager on #2 Classicist.",
                    exotics: "Exacta: 2 over 1, 6, 7. Trifecta: 2 with 1,6,7 with 1,6,7,11.",
                    horizontal: "A: 2; B: 1, 6; C: 7, 11"
                }
            }
        };
        
        const multiRaceData = {
            pick5s: [
                { name: "Late Pick 5", races: "6-10", legs: [
                    { race: 6, selections: "A: 12" },
                    { race: 7, selections: "A: 8, B: 3, 9" },
                    { race: 8, selections: "A: 8, B: 1, 7" },
                    { race: 9, selections: "A: 9, B: 6" },
                    { race: 10, selections: "SINGLE: 2" }
                ]}
            ],
            pick4s: [
                { name: "Late Pick 4", races: "7-10", legs: [
                    { race: 7, selections: "A: 8, B: 1a, 3, 9" },
                    { race: 8, selections: "A: 8, B: 1, 6, 7" },
                    { race: 9, selections: "A: 9, B: 6" },
                    { race: 10, selections: "SINGLE: 2" }
                ]}
            ],
            pick3s: [],
            pick6s: [],
            dailyDoubles: [
                { races: "2-3", leg1: "1, 6", leg2: "6", confidence: "High" },
                { races: "3-4", leg1: "6", leg2: "2, 3, 5", confidence: "High" },
                { races: "8-9", leg1: "8", leg2: "6, 9", confidence: "Medium" },
                { races: "9-10", leg1: "6, 9", leg2: "2", confidence: "High" }
            ]
        };

        let currentChart = null;
        const homePage = document.getElementById('home-page');
        const racePage = document.getElementById('race-page');
        const raceDetailsContainer = document.getElementById('race-details-container');

        function showHome() {
            homePage.classList.remove('hidden');
            racePage.classList.add('hidden');
            window.scrollTo(0, 0);
        }

        function showRace(raceNumber) {
            const race = raceData[raceNumber];
            if (!race) return;

            homePage.classList.add('hidden');
            racePage.classList.remove('hidden');

            raceDetailsContainer.innerHTML = `
                <div id="race-${raceNumber}" class="race-content pro-card p-5 md:p-6">
                    <div class="border-b border-gray-200 pb-4 mb-4">
                        <h2 class="font-poppins text-2xl font-bold text-[#0d47a1]">${race.meta}</h2>
                        <div class="mt-2 flex items-center">
                            <span class="pace-tag ${race.pace.class}">
                                <i data-lucide="wind" class="h-4 w-4"></i>
                                ${race.pace.type}
                            </span>
                            <p class="text-gray-600 ml-3 text-sm">${race.pace.text}</p>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-5 gap-6">
                        <div class="lg:col-span-3">
                            <h3 class="font-poppins text-xl font-semibold mb-2 text-[#0d47a1]">Value Analysis: Probability vs. Price</h3>
                            <p class="text-sm text-gray-500 mb-3">Comparing implied win probability (from odds) with our assessed probability. A taller "Assessed" bar indicates a potential value overlay.</p>
                            <div class="chart-container">
                                <canvas id="raceChart"></canvas>
                            </div>
                        </div>
                        <div class="lg:col-span-2 bg-slate-50 p-4 rounded-lg border border-gray-200">
                            <h3 class="font-poppins text-xl font-semibold mb-3 text-[#0d47a1]">Strategic Breakdown</h3>
                            <div class="space-y-4">
                                <div>
                                    <h4 class="font-semibold text-gray-700 flex items-center"><i data-lucide="brain-circuit" class="mr-2 h-5 w-5 text-blue-500"></i>Primary Thesis:</h4>
                                    <p class="text-gray-600 text-sm mt-1 pl-7">${race.thesis}</p>
                                </div>
                                <div>
                                    <h4 class="font-semibold text-gray-700 flex items-center"><i data-lucide="alert-triangle" class="mr-2 h-5 w-5 text-yellow-500"></i>Spoiler Scenario:</h4>
                                    <p class="text-gray-600 text-sm mt-1 pl-7">${race.spoiler}</p>
                                </div>
                                <div>
                                    <h4 class="font-semibold text-gray-700 flex items-center"><i data-lucide="dollar-sign" class="mr-2 h-5 w-5 text-green-500"></i>Wager Construction:</h4>
                                    <ul class="list-disc list-inside text-sm text-gray-600 space-y-1 mt-2 pl-7">
                                        <li><strong>Primary:</strong> ${race.wagers.primary}</li>
                                        <li><strong>Exotics:</strong> ${race.wagers.exotics}</li>
                                        <li><strong>Horizontal:</strong> ${race.wagers.horizontal}</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            lucide.createIcons();
            renderChart(race.chart);
            updateActiveNav(raceNumber);
            window.scrollTo(0, 0);
        }
        
        function renderMultiRaceGrids() {
            const hContainer = document.getElementById('horizontal-wagers-container');
            const dContainer = document.getElementById('daily-doubles-container');
            let hHtml = `
                <div class="pro-card p-5">
                    <h3 class="font-poppins text-xl font-semibold mb-4 text-[#0d47a1] flex items-center gap-2">
                        <i data-lucide="git-merge" class="h-6 w-6"></i>
                        Horizontal Grid
                    </h3>
                    <div class="overflow-x-auto">
                        <table class="w-full text-sm wager-table">
                            <thead><tr><th>Wager</th><th>Races</th><th>Leg 1</th><th>Leg 2</th><th>Leg 3</th><th>Leg 4</th><th>Leg 5</th><th>Leg 6</th></tr></thead>
                            <tbody>`;

            const allWagers = [
                ...multiRaceData.pick6s, 
                ...multiRaceData.pick5s, 
                ...multiRaceData.pick4s, 
                ...multiRaceData.pick3s
            ];
            
            if(allWagers.length > 0) {
                allWagers.forEach(wager => {
                    hHtml += `<tr><td><strong>${wager.name}</strong></td><td>${wager.races}</td>`;
                    const totalLegs = wager.legs.length;
                    for(let i=0; i < 6; i++) {
                        if (wager.legs[i]) {
                           hHtml += `<td>${wager.legs[i].selections}</td>`;
                        } else {
                           hHtml += `<td class="bg-gray-50"></td>`;
                        }
                    }
                    hHtml += `</tr>`;
                });
            } else {
                hHtml += `<tr><td colspan="8" class="text-center py-4 text-gray-500">No horizontal wagers recommended for today.</td></tr>`;
            }
            hHtml += `</tbody></table></div></div>`;

            let dHtml = `
                <div class="pro-card p-5">
                     <h3 class="font-poppins text-xl font-semibold mb-4 text-[#0d47a1] flex items-center gap-2">
                        <i data-lucide="link-2" class="h-6 w-6"></i>
                        Top Daily Doubles
                    </h3>
                    <div class="overflow-x-auto">
                        <table class="w-full text-sm wager-table">
                            <thead><tr><th>Races</th><th>Leg 1 Picks</th><th>Leg 2 Picks</th><th>Confidence</th></tr></thead>
                            <tbody>`;
            
            if(multiRaceData.dailyDoubles.length > 0) {
                 multiRaceData.dailyDoubles.forEach(dd => {
                    const confidenceClass = dd.confidence === 'High' ? 'confidence-high' : 'confidence-medium';
                    dHtml += `<tr class="${confidenceClass}">
                                <td><strong>${dd.races}</strong></td>
                                <td>${dd.leg1}</td>
                                <td>${dd.leg2}</td>
                                <td><strong>${dd.confidence}</strong></td>
                              </tr>`;
                });
            } else {
                 dHtml += `<tr><td colspan="4" class="text-center py-4 text-gray-500">No Daily Double wagers recommended for today.</td></tr>`;
            }

            dHtml += `</tbody></table></div></div>`;

            hContainer.innerHTML = hHtml;
            dContainer.innerHTML = dHtml;
        }

        function renderChart(chartData) {
            const ctx = document.getElementById('raceChart').getContext('2d');
            
            if (currentChart) {
                currentChart.destroy();
            }

            currentChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: chartData.labels,
                    datasets: [
                        {
                            label: 'Implied Probability (Odds)',
                            data: chartData.implied,
                            backgroundColor: '#90caf9', 
                            borderColor: '#42a5f5',
                            borderWidth: 1,
                            borderRadius: 4
                        },
                        {
                            label: 'Assessed Probability (Analysis)',
                            data: chartData.assessed,
                            backgroundColor: '#455a64',
                            borderColor: '#1e2b33',
                            borderWidth: 1,
                            borderRadius: 4
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: { color: '#e0e0e0' },
                            ticks: { color: '#334155' },
                            title: {
                                display: true,
                                text: 'Win Probability (%)',
                                color: '#334155',
                                font: { family: "'Roboto', sans-serif" }
                            }
                        },
                        x: {
                             grid: { display: false },
                             ticks: { color: '#334155' }
                        }
                    },
                    plugins: {
                        legend: {
                            position: 'top',
                            labels: {
                                color: '#334155',
                                font: { family: "'Roboto', sans-serif" }
                            }
                        },
                        tooltip: {
                            backgroundColor: '#0d47a1',
                            titleColor: '#ffffff',
                            bodyColor: '#ffffff',
                            titleFont: { family: "'Poppins', sans-serif" },
                            bodyFont: { family: "'Roboto', sans-serif" },
                            callbacks: {
                                label: function(context) {
                                    let label = context.dataset.label || '';
                                    if (label) { label += ': '; }
                                    if (context.parsed.y !== null) { label += context.parsed.y + '%'; }
                                    return label;
                                }
                            }
                        }
                    }
                }
            });
        }

        function updateActiveNav(raceNumber) {
            const buttons = document.querySelectorAll('.race-nav-btn');
            buttons.forEach(btn => {
                if (btn.dataset.race === raceNumber.toString()) {
                    btn.classList.add('active', 'font-bold');
                } else {
                    btn.classList.remove('active', 'font-bold');
                }
            });
        }

        function initializeApp() {
            const raceLinkContainer = document.getElementById('race-link-container');
            const navContainer = document.getElementById('race-nav-container');
            const raceKeys = Object.keys(raceData);

            raceLinkContainer.innerHTML = '';
            navContainer.innerHTML = '';

            for (const raceKey of raceKeys) {
                // Create links for the home page
                const raceLink = document.createElement('div');
                raceLink.className = 'race-link-card';
                raceLink.textContent = `Race ${raceKey}`;
                raceLink.onclick = () => showRace(raceKey);
                raceLinkContainer.appendChild(raceLink);

                // Create navigation buttons for the race page
                const navButton = document.createElement('button');
                navButton.textContent = `Race ${raceKey}`;
                navButton.dataset.race = raceKey;
                navButton.className = 'race-nav-btn font-semibold';
                navButton.onclick = () => showRace(raceKey);
                navContainer.appendChild(navButton);
            }
            
            renderMultiRaceGrids();
            lucide.createIcons();
            showHome();
        }

        window.onload = initializeApp;
    </script>
</body>
</html>
