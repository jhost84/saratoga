<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wodonga Interactive Handicapper Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Chosen Palette: Saratoga Sage & Slate -->
    <!-- Application Structure Plan: The SPA is designed around a central dashboard for immediate, high-level insights (Top Bets, Longshots, Fades), which serves as the landing page. This caters to users seeking quick, actionable information. From there, a clear top navigation allows users to select a specific race. Each race view uses a tabbed interface ('Analysis', 'Pace Scenario', 'Top Contenders') to segment the complex information, preventing cognitive overload from a long scroll. This structured, hierarchical approach—from dashboard summary to race-specific details—allows users to explore at their preferred depth, making the dense report content highly digestible and user-friendly. -->
    <!-- Visualization & Content Choices: 
        - Report Info: Daily Betting Angles (Top Bets, Fades, etc.) -> Goal: Inform/Summarize -> Viz/Method: HTML/Tailwind Cards -> Interaction: Clickable cards to navigate to the race -> Justification: Provides a scannable, high-impact summary on the main dashboard.
        - Report Info: Pace analysis (running styles) -> Goal: Compare/Organize -> Viz/Method: Chart.js Horizontal Bar Chart -> Interaction: Hover tooltips on bars -> Justification: Visually groups horses by running style (Speed, Presser, Closer), making the pace setup instantly understandable.
        - Report Info: Betting Strategy (Contenders, Wagers) -> Goal: Inform/Organize -> Viz/Method: Structured HTML/Tailwind cards with icons -> Interaction: None -> Justification: Clearly delineates win contenders, longshots, and fades with supporting rationale in a clean, organized layout.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            background-color: #FDFDFB;
            font-family: 'Georgia', serif;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
        .nav-button {
            transition: all 0.3s ease;
        }
        .nav-button.active {
            background-color: #4A5568; /* slate-700 */
            color: #FFFFFF;
            transform: translateY(-2px);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
        }
        .tab-button.active {
            border-color: #4A5568; /* slate-700 */
            background-color: #F7FAFC; /* gray-50 */
            color: #2D3748; /* gray-800 */
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        .card-shadow {
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.05), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
    </style>
</head>
<body class="text-gray-800">

    <div class="container mx-auto p-4 md:p-8 max-w-7xl">
        <header class="text-center mb-8">
            <h1 class="text-4xl md:text-5xl font-bold text-gray-800 tracking-tight">Wodonga Racing Analysis</h1>
            <p class="text-lg text-gray-600 mt-2">August 4, 2025 &bull; Track: Soft 7</p>
        </header>

         <nav class="mb-8 bg-white p-2 rounded-lg shadow-sm sticky top-2 z-10">
            <ul id="race-navigation" class="flex flex-wrap justify-center gap-2">
                <li><a href="index.html" class="nav-button px-4 py-2 text-sm font-semibold text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200">Home</a></li>
                <li><button data-race="dashboard" class="nav-button px-4 py-2 text-sm font-semibold text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 active">Dashboard</button></li>
            </ul>
        </nav>

        <main id="main-content">
        </main>
    </div>

    <script>
        const summaryData = {
            topWins: [
                { race: 3, horse: '#4 Top Secret', rationale: 'A premier metropolitan stable\'s placement in a provincial maiden is a powerful signal. Possesses a controlling speed advantage and a class edge over this field.' },
                { race: 4, horse: '#2 Burn Bobby Burn', rationale: 'Progressing perfectly for the step up to a staying distance. Hails from a top stable and appears poised for a peak performance.' }
            ],
            longshots: [
                { race: 1, horse: '#7 With Strength', rationale: 'His debut performance was much better than it appears on paper due to a wide trip. Offers excellent value to upset.' },
                { race: 2, horse: '#5 Magic Money', rationale: 'The "can forgive" comment from his last start indicates a legitimate excuse. His prior form is strong for this level.' }
            ],
            horizontalKeys: [
                { title: 'Best Horizontal Keys', keys: '<strong>Race 3: #4 Top Secret</strong> - The most confident selection of the day. A logical single in all Pick 3, Pick 4, and Pick 5 sequences.<br><strong>Race 8: #2 Star Rapper</strong> - A progressive horse who has proven his affinity for wet ground. A strong anchor for the final leg of multi-race wagers.' }
            ],
            fades: [
                { race: 1, horse: '#3 Da Plane Da Plane', rationale: 'An exposed maiden with nine losses who is likely to be part of a contested pace on taxing ground. A vulnerable, low-priced contender.' },
                { race: 2, horse: '#7 Justified At Last', rationale: 'The extreme cutback in distance from 2200m to 1300m is a historically low-percentage play. Likely to be outpaced.' }
            ]
        };

        const raceData = {
            1: {
                meta: { title: 'Bill Tilley Member For Benambra Maiden Plate', distance: '1000m', surface: 'Turf', purse: '$32,000' },
                analysis: {
                    scratches: 'Four runners scratched',
                    overview: 'The opening contest is a Maiden Optional Claiming event for a large field of inexperienced gallopers. The scratching of four runners simplifies the field slightly but leaves a competitive group where pace and wet-track ability will be paramount.',
                    class: 'While this is a maiden race, the presence of runners from premier metropolitan stables like Mick Price & Michael Kent (Jnr) for #8 Above Me effectively introduces a class dynamic. Such stables often place their horses in provincial races with high confidence, suggesting a perceived class edge over local competitors.',
                    form: 'A critical factor is the presence of premier metropolitan stables. The Price/Kent Jnr stable sends out #8 Above Me, a powerful signal of intent. The jockey booking of Brad Rawiller, with a 25% win rate at Wodonga, on first-time starter #2 Cosmic Boy is also a significant indicator of potential readiness.',
                    trouble: 'Significant betting value may be found with #7 With Strength. His debut comment "Wide/honest effort" reveals he endured a difficult trip. Despite this, he was beaten only a single length. This underappreciated positive factor is likely to ensure his odds remain at a value-laden price.'
                },
                pace: {
                    intro: 'A strongly contested to fast early tempo is projected. The combination of multiple speed horses and soft ground is decidedly DISADVANTAGEOUS for the leaders and sets the race up for stalkers or closers.',
                    horses: [
                        { name: '#3 Da Plane Da Plane', style: 3, label: 'Early Speed' },
                        { name: '#8 Above Me', style: 3, label: 'Early Speed' },
                        { name: '#9 Inkaantoon', style: 3, label: 'Early Speed' },
                        { name: '#15 Youarenotalone', style: 3, label: 'Early Speed' },
                        { name: '#7 With Strength', style: 2, label: 'Stalker' },
                        { name: '#2 Cosmic Boy', style: 1, label: 'Closer' },
                    ]
                },
                betting: {
                    winContenders: ['#8 Above Me', '#7 With Strength'],
                    liveLongshot: ['#9 Inkaantoon'],
                    fade: ['#3 Da Plane Da Plane'],
                    wagers: 'Win Bet: #7 With Strength (at 4-1+). Exacta: Box 7, 8. Trifecta: 8,7 / 8,7 / 2,9,16. Horizontal: #8 is an A, #7 is a B.'
                }
            },
            2: {
                meta: { title: 'DA Signs Maiden Plate', distance: '1300m', surface: 'Turf', purse: '$32,000' },
                analysis: {
                    scratches: '',
                    overview: 'This race stretches out to about six and a half furlongs. The field is comprised of several runners who have had multiple chances to win, alongside a few less-exposed contenders, making it a test of both established form and potential improvement.',
                    class: '#7 Justified At Last makes a notable and unconventional class and distance change, cutting back sharply from staying races. This is a significant strategic move by the Kavanagh stable, attempting to leverage her stamina against speed-oriented rivals.',
                    form: 'A key jockey angle is the booking of Brad Rawiller for #3 Eternity Star. This horse is returning from a very long layoff, and securing a top local jockey is a strong vote of confidence from the connections that the horse is ready to perform.',
                    trouble: 'A key to finding value lies in the last start of #5 Magic Money. The official chart comment "can forgive" indicates that his fourth-place finish was not a true representation of his ability due to significant trouble in running. This creates a clear value opportunity.'
                },
                pace: {
                    intro: 'The pace projects to be honest but not overly fast, with #1 Camp Cable and #5 Magic Money as the primary speed. This race shape appears ADVANTAGEOUS for a horse with tactical speed that can settle into a comfortable stalking position.',
                    horses: [
                        { name: '#5 Magic Money', style: 3, label: 'Early Speed' },
                        { name: '#1 Camp Cable', style: 2.5, label: 'Presser/Speed' },
                        { name: '#4 Kilmer', style: 2, label: 'Stalker' },
                        { name: '#2 Eltanin', style: 1.5, label: 'Mid-Pack' },
                        { name: '#7 Justified At Last', style: 1, label: 'Closer' },
                    ]
                },
                betting: {
                    winContenders: ['#4 Kilmer', '#5 Magic Money'],
                    liveLongshot: ['#1 Camp Cable'],
                    fade: ['#7 Justified At Last'],
                    wagers: 'Win/Place Bet: #5 Magic Money. Exacta: Box 4, 5. Trifecta: 4,5 / 1,4,5 / 1,2,4,5,17. Horizontal: #4 is an A/B, #5 is a B/C.'
                }
            },
            3: {
                meta: { title: 'Parkside Produce Maiden Plate', distance: '1600m', surface: 'Turf', purse: '$32,000' },
                analysis: {
                    scratches: '',
                    overview: 'This maiden event is contested over a mile. The step up to a middle distance will test the stamina of these developing horses, often allowing class and pedigree to come to the fore.',
                    class: 'This race features a standout contender in #4 Top Secret. The decision by a premier national training operation like Waterhouse/Bott to target a regional maiden race is a powerful statement of intent and signals a significant class advantage.',
                    form: 'The most significant factor is the placement of #4 Top Secret by the Waterhouse/Bott stable. This has a historically high success rate. His front-running style is the stable\'s signature, and they are masters at preparing horses for such assignments.',
                    trouble: 'While #4 Top Secret is the likely winner, #9 She Thinks Ahead presents value in exotics. Her past comments suggest she wants more ground. Now third-up and stretching to a mile with top jockey Daniel Moor, she is poised to run her best race and can complete the exacta at a good price.'
                },
                pace: {
                    intro: 'The pace will be dictated by #4 Top Secret. His speed is of a superior quality for this grade. This pace scenario is highly ADVANTAGEOUS for #4 Top Secret, as he should be able to dictate terms to suit himself.',
                    horses: [
                        { name: '#4 Top Secret', style: 3, label: 'Lone Speed' },
                        { name: '#7 Lost Ya Sock', style: 2, label: 'Stalker' },
                        { name: '#6 Cheeky Crab', style: 2, label: 'Stalker' },
                        { name: '#9 She Thinks Ahead', style: 1, label: 'Closer' },
                    ]
                },
                betting: {
                    winContenders: ['#4 Top Secret', '#9 She Thinks Ahead'],
                    liveLongshot: ['#7 Lost Ya Sock'],
                    fade: [],
                    wagers: 'Win Bet: #4 Top Secret. Exacta: 4 with 9, 7. Trifecta: 4 / 9 / 7, 12. Horizontal: #4 is the strongest single on the program.'
                }
            },
            4: {
                meta: { title: 'Rafferty Bros Electrical Maiden Plate', distance: '2000m', surface: 'Turf', purse: '$32,000' },
                analysis: {
                    scratches: '',
                    overview: 'This maiden race is run over approximately 1 1/4 miles, a true test of stamina. Pedigree and demonstrated ability to relax and finish over a mile or more become critical handicapping factors.',
                    class: 'The influence of top stables is again a key theme. The Price/Kent Jnr. stable saddles #2 Burn Bobby Burn, and the Ben, Will & JD Hayes stable sends out #7 Wallenberg. The presence of these two well-regarded stables suggests their runners are the class of the race.',
                    form: 'The jockey booking of Brad Rawiller on #6 Tosen Impact is significant. Rawiller\'s exceptional 25% win rate at Wodonga makes any of his mounts a threat, and his skill with tactical types could give #6 Tosen Impact a strategic advantage in a moderately paced race.',
                    trouble: '#8 Weekend Lover presents a potential value opportunity. He is a "professional maiden," having finished second three times. The market may gravitate towards the less-exposed horses, allowing this consistent performer to go off at inflated odds in exotic wagers.'
                },
                pace: {
                    intro: 'The pace is projected to be slow to moderate. A tactical, moderately run race is the most likely scenario. This is ADVANTAGEOUS for horses that can settle comfortably in the first half of the field and conserve energy.',
                    horses: [
                        { name: '#1 Brilliant Badger', style: 2.5, label: 'Presser/Speed' },
                        { name: '#6 Tosen Impact', style: 2.5, label: 'Presser/Speed' },
                        { name: '#2 Burn Bobby Burn', style: 1.5, label: 'Mid-Pack' },
                        { name: '#7 Wallenberg', style: 1, label: 'Closer' },
                    ]
                },
                betting: {
                    winContenders: ['#2 Burn Bobby Burn', '#7 Wallenberg'],
                    liveLongshot: ['#6 Tosen Impact'],
                    fade: ['#1 Brilliant Badger'],
                    wagers: 'Win Bet: #2 Burn Bobby Burn. Exacta: Box 2, 7. Trifecta: 2,7 / 2,6,7,8 / 2,5,6,7,8. Horizontal: #2 is an A, #7 is a B.'
                }
            },
            5: {
                meta: { title: 'Sam Miranda Wines BM58 Handicap', distance: '2050m', surface: 'Turf', purse: '$27,000' },
                analysis: {
                    scratches: '',
                    overview: 'This is a Benchmark 58 Handicap over a staying distance. This race brings together a field of proven winners, creating a more complex handicapping challenge than the preceding maiden events.',
                    class: '#6 Makamae represents the powerful Price/Kent Jnr. stable. As a lightly raced four-year-old stepping up against more exposed rivals, she has far more potential for improvement and brings a different class profile to the race.',
                    form: 'The Ben Brisbourne stable has two runners, #2 First Day and #9 Azeola. Brisbourne has an excellent record at Wodonga over the past 12 months, winning at a 23.81% clip with a positive ROI of 48%, making his runners essential to consider.',
                    trouble: 'A compelling case for value can be made for #5 Ideelistic. The official comment "should\'ve won?" from two starts back is a powerful indicator of severe trouble. A subsequent lameness issue is a clear excuse. If he returns sound, his form is much better than it appears.'
                },
                pace: {
                    intro: 'The pace projects to be genuine and honest with #1 Quamby and #15 Think More ensuring a solid tempo. This scenario is NEUTRAL to slightly DISADVANTAGEOUS for the dedicated front-runners, potentially setting up a stalker or closer.',
                    horses: [
                        { name: '#1 Quamby', style: 3, label: 'Early Speed' },
                        { name: '#15 Think More', style: 3, label: 'Early Speed' },
                        { name: '#4 Overloaded', style: 2, label: 'Stalker' },
                        { name: '#6 Makamae', style: 1.5, label: 'Mid-Pack/Closer' },
                        { name: '#11 Sleep Deprived', style: 1, label: 'Closer' },
                    ]
                },
                betting: {
                    winContenders: ['#6 Makamae', '#1 Quamby'],
                    liveLongshot: ['#11 Sleep Deprived'],
                    fade: ['#2 First Day'],
                    wagers: 'Win Bet: #6 Makamae. Exacta: Box 1, 4, 6, 11. Trifecta: 6 / 1,4,11 / 1,4,5,11,15. Horizontal: #6 is an A, #1 and #4 are Bs.'
                }
            },
            6: {
                meta: { title: 'Sleep Clinics BM58 Handicap', distance: '1600m', surface: 'Turf', purse: '$27,000' },
                analysis: {
                    scratches: '',
                    overview: 'This Benchmark 58 Handicap over a mile features a large, competitive field of seasoned campaigners, making it a challenging race to decipher.',
                    class: '#14 Wollemia Angel is a key horse stepping up in class after a dominant maiden victory. Horses making their first start against winners after a strong maiden win are often dangerous as they are on a steep upward trajectory and their true class level is not yet established.',
                    form: '#10 Wings Of Carmen enters this race in excellent form, having finished a strong second in his last two starts. He is a consistent performer at this level and looks poised for another competitive effort. The Danny O\'Brien stable has a high strike rate when sending horses from maiden to handicap company.',
                    trouble: '#1 Lord Domino is a fascinating case. He is consistently competitive but finds it very difficult to win (3 for 32). He often takes money due to his forward running style, but his lack of a winning punch makes him a risky win proposition at short odds. The value lies in betting against him to win.'
                },
                pace: {
                    intro: 'The pace is projected to be honest. #1 Lord Domino, #2 Dreamstone, and #7 Eskimo all possess tactical speed. This should ensure a legitimate tempo. The scenario is NEUTRAL, as both on-pace runners and closers should have their chance.',
                    horses: [
                        { name: '#1 Lord Domino', style: 2.5, label: 'Presser/Speed' },
                        { name: '#2 Dreamstone', style: 2.5, label: 'Presser/Speed' },
                        { name: '#7 Eskimo', style: 2, label: 'Stalker' },
                        { name: '#10 Wings Of Carmen', style: 1, label: 'Closer' },
                        { name: '#14 Wollemia Angel', style: 1, label: 'Closer' },
                    ]
                },
                betting: {
                    winContenders: ['#1 Lord Domino', '#10 Wings Of Carmen'],
                    liveLongshot: ['#14 Wollemia Angel'],
                    fade: [],
                    wagers: 'Exacta: Box 1, 6, 10, 14. Trifecta: 1,10 / 1,6,10,14 / 1,6,7,10,14. Horizontal: Spread in multi-race wagers. Use #1, #10, #14.'
                }
            },
            7: {
                meta: { title: 'Picklebet loves Wodonga BM58 Handicap', distance: '1000m', surface: 'Turf', purse: '$27,000' },
                analysis: {
                    scratches: '',
                    overview: 'This sprint is defined by an abundance of early speed, which will make the start and the first 200m critically important.',
                    class: 'The most intriguing runner is #7 Nonshalaant. He is making his first start for a new stable after a successful career in New South Wales and is taking a significant drop in class. This combination of a class drop and proven wet-track ability makes him a major contender.',
                    form: '#10 Do It Now comes out of stronger provincial races and has a good second-place finish on a heavy track. She has the ideal stalking running style to take advantage of the projected pace collapse, a high-percentage angle in races with this much speed.',
                    trouble: 'The key to this race is identifying which horse is best suited to capitalize on the likely pace meltdown. The public may be drawn to the raw speed of #7 Nonshalaant, but the race shape strongly favors a stalker. This creates value on #10 Do It Now, who is the right horse for the right scenario.'
                },
                pace: {
                    intro: 'The pace is projected to be extremely fast and highly contested. On a Soft 7 track, this pace scenario is HIGHLY DISADVANTAGEOUS for all front-runners, setting up a stalker or closer.',
                    horses: [
                        { name: '#7 Nonshalaant', style: 3, label: 'Early Speed' },
                        { name: '#9 Rowdy Anthem', style: 3, label: 'Early Speed' },
                        { name: '#11 Brooklyn Baby', style: 3, label: 'Early Speed' },
                        { name: '#1 Mojo Music', style: 2.5, label: 'Presser/Speed' },
                        { name: '#10 Do It Now', style: 2, label: 'Stalker' },
                    ]
                },
                betting: {
                    winContenders: ['#7 Nonshalaant', '#10 Do It Now'],
                    liveLongshot: ['#1 Mojo Music'],
                    fade: ['#9 Rowdy Anthem'],
                    wagers: 'Win Bet: #10 Do It Now. Exacta: Box 1, 7, 10. Trifecta: 10 / 1,7,9 / 1,7,9,14. Horizontal: #10 and #7 are the A horses.'
                }
            },
            8: {
                meta: { title: 'Become a Racing Wodonga Member BM58 Handicap', distance: '1000m', surface: 'Turf', purse: '$27,000' },
                analysis: {
                    scratches: '',
                    overview: 'The final race of the day is another sprint with considerable early speed, making the pace scenario a critical handicapping factor.',
                    class: '#2 Star Rapper is a lightly raced and progressive horse who appears to have more upside than his rivals. His dominant maiden win suggests he may be a class above this Benchmark 58 level, and he is the one horse in the field with the potential to be a future city-class runner.',
                    form: '#3 Hells Son is a Wodonga specialist who is extremely consistent at this track and distance. While he doesn\'t win often, his reliability makes him a must-include in all exotic wagers, especially given the contentious pace scenario that could flatter his closing style.',
                    trouble: 'The value may come from opposing the likely favorite, #2 Star Rapper, in the win pool. As a lightly raced horse with good recent form, he is likely to be heavily bet. However, he is stepping into a race with significant pace pressure. There is a possibility that the hot pace could make him vulnerable late.'
                },
                pace: {
                    intro: 'The pace is once again projected to be fast and contested. This pace setup is DISADVANTAGEOUS for the front-runners. The horse that can sit just off the speed and get the first run on the tiring leaders will hold a significant advantage.',
                    horses: [
                        { name: '#2 Star Rapper', style: 3, label: 'Early Speed' },
                        { name: '#5 Gundaroo', style: 3, label: 'Early Speed' },
                        { name: '#8 Before The War', style: 3, label: 'Early Speed' },
                        { name: '#9 Deekaygeebee', style: 2.5, label: 'Presser/Speed' },
                        { name: '#3 Hells Son', style: 1, label: 'Closer' },
                    ]
                },
                betting: {
                    winContenders: ['#2 Star Rapper', '#3 Hells Son'],
                    liveLongshot: ['#8 Before The War'],
                    fade: [],
                    wagers: 'Win Bet: #2 Star Rapper. Exacta: 2 with 3, 8. Trifecta: 2 / 3,8 / 3,5,8,9. Horizontal: #2 is a solid A to close out the day.'
                }
            }
        };

        const mainContent = document.getElementById('main-content');
        const raceNavigation = document.getElementById('race-navigation');
        let activeCharts = [];

        function clearContent() {
            mainContent.innerHTML = '';
            activeCharts.forEach(chart => chart.destroy());
            activeCharts = [];
        }

        function renderDashboard() {
            clearContent();
            const dashboardHTML = `
                <div class="space-y-8">
                    <div class="bg-white p-6 rounded-lg card-shadow">
                        <h2 class="text-2xl font-bold mb-4 flex items-center"><span class="text-3xl mr-3">🔑</span> Top Win Bets</h2>
                        <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-4">
                            ${summaryData.topWins.map(bet => `
                                <div class="border border-gray-200 rounded-lg p-4 bg-green-50/50 cursor-pointer hover:shadow-md transition-shadow" onclick="document.querySelector('button[data-race=\\'${bet.race}\\']').click()">
                                    <h3 class="font-bold text-lg text-green-800">Race ${bet.race}: ${bet.horse}</h3>
                                    <p class="text-sm text-gray-600">${bet.rationale}</p>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                    <div class="grid md:grid-cols-2 gap-8">
                        <div class="bg-white p-6 rounded-lg card-shadow">
                            <h2 class="text-2xl font-bold mb-4 flex items-center"><span class="text-3xl mr-3">💣</span> Live Longshots</h2>
                            <div class="space-y-4">
                                ${summaryData.longshots.map(bet => `
                                    <div class="border border-gray-200 rounded-lg p-4 bg-yellow-50/50 cursor-pointer hover:shadow-md transition-shadow" onclick="document.querySelector('button[data-race=\\'${bet.race}\\']').click()">
                                        <h3 class="font-bold text-lg text-yellow-800">Race ${bet.race}: ${bet.horse}</h3>
                                        <p class="text-sm text-gray-600">${bet.rationale}</p>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                        <div class="bg-white p-6 rounded-lg card-shadow">
                            <h2 class="text-2xl font-bold mb-4 flex items-center"><span class="text-3xl mr-3">🚫</span> Favorites to Fade</h2>
                             <div class="space-y-4">
                                ${summaryData.fades.map(bet => `
                                    <div class="border border-gray-200 rounded-lg p-4 bg-red-50/50 cursor-pointer hover:shadow-md transition-shadow" onclick="document.querySelector('button[data-race=\\'${bet.race}\\']').click()">
                                        <h3 class="font-bold text-lg text-red-800">Race ${bet.race}: ${bet.horse}</h3>
                                        <p class="text-sm text-gray-600">${bet.rationale}</p>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    </div>
                    <div class="bg-white p-6 rounded-lg card-shadow">
                        <h2 class="text-2xl font-bold mb-4 flex items-center"><span class="text-3xl mr-3">🎯</span> Best Horizontal Keys</h2>
                        <div>
                            ${summaryData.horizontalKeys.map(bet => `
                                <div>
                                    <h3 class="font-bold text-lg text-blue-800">${bet.title}</h3>
                                    <p class="text-sm text-gray-600 leading-relaxed">${bet.keys}</p>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </div>
            `;
            mainContent.innerHTML = dashboardHTML;
        }

        function renderRace(raceNumber) {
            clearContent();
            const data = raceData[raceNumber];
            const raceHTML = `
                <div class="bg-white p-4 sm:p-6 rounded-lg card-shadow">
                    <div class="border-b border-gray-200 pb-4 mb-4">
                        <h2 class="text-3xl font-bold">Race ${raceNumber}: ${data.meta.title}</h2>
                        <p class="text-md text-gray-600">${data.meta.distance} on the ${data.meta.surface} | Purse: ${data.meta.purse}</p>
                    </div>

                    ${data.analysis.scratches ? `<div class="mb-4 p-3 bg-yellow-100 border-l-4 border-yellow-500 text-yellow-800 rounded-r-lg">
                        <p class="font-semibold">Scratched: ${data.analysis.scratches}</p>
                    </div>` : ''}

                    <div class="mb-4 border-b border-gray-200">
                        <nav id="race-tabs" class="-mb-px flex justify-center space-x-4" aria-label="Tabs">
                            <button data-tab="analysis" class="tab-button whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 active">Analysis</button>
                            <button data-tab="pace" class="tab-button whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300">Pace Scenario</button>
                            <button data-tab="betting" class="tab-button whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300">Top Contenders</button>
                        </nav>
                    </div>

                    <div id="tab-content-analysis" class="tab-content active">
                        <div class="space-y-4 text-gray-700 leading-relaxed">
                            <div><h3 class="font-bold text-lg mb-1">Race Overview</h3><p>${data.analysis.overview}</p></div>
                            <div><h3 class="font-bold text-lg mb-1">Class Movement</h3><p>${data.analysis.class}</p></div>
                            <div><h3 class="font-bold text-lg mb-1">Form & Trainer Angles</h3><p>${data.analysis.form}</p></div>
                            <div><h3 class="font-bold text-lg mb-1">Trouble Lines & Hidden Form</h3><p>${data.analysis.trouble}</p></div>
                        </div>
                    </div>

                    <div id="tab-content-pace" class="tab-content">
                        <p class="mb-4 text-center text-gray-600">${data.pace.intro}</p>
                        <div class="chart-container">
                            <canvas id="paceChart"></canvas>
                        </div>
                    </div>

                    <div id="tab-content-betting" class="tab-content">
                        <div class="grid md:grid-cols-3 gap-4">
                            <div class="border-l-4 border-green-500 p-4 bg-gray-50 rounded">
                                <h3 class="font-bold text-lg text-green-700">Win Contenders</h3>
                                <ul class="list-disc list-inside mt-2">${data.betting.winContenders.map(h => `<li>${h}</li>`).join('')}</ul>
                            </div>
                            <div class="border-l-4 border-yellow-500 p-4 bg-gray-50 rounded">
                                <h3 class="font-bold text-lg text-yellow-700">Live Longshot</h3>
                                <ul class="list-disc list-inside mt-2">${data.betting.liveLongshot.map(h => `<li>${h}</li>`).join('')}</ul>
                            </div>
                            <div class="border-l-4 border-red-500 p-4 bg-gray-50 rounded">
                                <h3 class="font-bold text-lg text-red-700">Favorites to Fade</h3>
                                <ul class="list-disc list-inside mt-2">${data.betting.fade.map(h => `<li>${h}</li>`).join('')}</ul>
                            </div>
                        </div>
                        <div class="mt-6 border-t pt-4">
                             <h3 class="font-bold text-lg">Suggested Wagers</h3>
                             <p class="text-gray-700 mt-1">${data.betting.wagers}</p>
                        </div>
                    </div>
                </div>
            `;
            mainContent.innerHTML = raceHTML;
            setupTabs();
            if (document.getElementById('paceChart')) {
                renderPaceChart(raceNumber);
            }
        }
        
        function renderPaceChart(raceNumber) {
            const paceData = raceData[raceNumber].pace.horses;
            const ctx = document.getElementById('paceChart').getContext('2d');
            const chart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: paceData.map(h => h.name),
                    datasets: [{
                        label: 'Running Style',
                        data: paceData.map(h => h.style),
                        backgroundColor: 'rgba(74, 85, 104, 0.6)',
                        borderColor: 'rgba(45, 55, 72, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    indexAxis: 'y',
                    maintainAspectRatio: false,
                    responsive: true,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return paceData[context.dataIndex].label;
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            beginAtZero: true,
                            max: 3.5,
                            ticks: {
                                callback: function(value, index, values) {
                                    if (value === 1) return 'Closer';
                                    if (value === 2) return 'Stalker/Presser';
                                    if (value === 3) return 'Early Speed';
                                    return '';
                                }
                            }
                        }
                    }
                }
            });
            activeCharts.push(chart);
        }

        function setupTabs() {
            const tabs = document.querySelectorAll('.tab-button');
            const contents = document.querySelectorAll('.tab-content');
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    tabs.forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    const target = tab.getAttribute('data-tab');
                    contents.forEach(content => {
                        content.classList.remove('active');
                        if (content.id === `tab-content-${target}`) {
                            content.classList.add('active');
                        }
                    });
                });
            });
        }
        
        document.addEventListener('DOMContentLoaded', () => {
            Object.keys(raceData).forEach(raceNum => {
                const li = document.createElement('li');
                const button = document.createElement('button');
                button.className = 'nav-button px-4 py-2 text-sm font-semibold text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200';
                button.textContent = `Race ${raceNum}`;
                button.dataset.race = raceNum;
                li.appendChild(button);
                raceNavigation.appendChild(li);
            });

            raceNavigation.addEventListener('click', (e) => {
                if (e.target.tagName === 'BUTTON') {
                    document.querySelectorAll('#race-navigation button, #race-navigation a').forEach(btn => btn.classList.remove('active'));
                    e.target.classList.add('active');
                    const raceId = e.target.dataset.race;
                    if (raceId === 'dashboard') {
                        renderDashboard();
                    } else {
                        renderRace(raceId);
                    }
                }
            });

            renderDashboard();
        });
    </script>
</body>
</html>
