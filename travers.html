<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exacta AI - Handicapping Dashboard Template</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&family=Poppins:wght@600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <!-- Chosen Palette: Exacta AI (Navy, Electric Blue, Slate) -->
    <!-- Application Structure Plan: The application is designed as a dashboard to prioritize user-centric exploration over the report's linear format. The initial view presents a high-level "Executive Summary" with the most actionable bets (Prime Bet, Value Plays, Fades), allowing users to immediately grasp key opportunities. A persistent navigation bar enables non-linear access to any of the eight races. Clicking a race dynamically updates the main content area with a detailed analysis for that specific race. This structure was chosen because horseplayers value efficiency; they need to quickly identify top plays and then drill down for justification, rather than being forced to read a long document sequentially. The core of this design is the dynamic rendering of race data, including an interactive chart, into a consistent template, which enhances usability and comparison. -->
    <!-- Visualization & Content Choices: Report Info: Probability vs. Price analysis for key horses. -> Goal: Visually compare the handicapper's assessed win probability against the market's implied probability to instantly identify value (overlays) or risk (underlays). -> Viz/Presentation Method: A grouped bar chart (Chart.js/Canvas) for each race. -> Interaction: On hover, tooltips display precise odds, implied probability, and assessed probability. -> Justification: A chart is far more effective and immediate for comparing quantitative data than a table or text, directly supporting the report's central theme of "Price x Probability = Value". Report Info: Pace Projection. -> Goal: Quickly convey the expected race shape. -> Viz/Presentation Method: Color-coded HTML tags (e.g., red for "Pressured Duel"). -> Justification: Visual tags provide at-a-glance information that is faster to process than a sentence. Report Info: Wager construction. -> Goal: Clearly present betting strategies. -> Viz/Presentation Method: Structured HTML lists. -> Justification: Clean, scannable lists are ideal for actionable instructions. -> Library/Method: Chart.js for charts, Tailwind/HTML for all other visual elements. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Roboto', sans-serif;
            background-color: #f0f2f5;
            color: #334155;
        }
        .font-poppins {
            font-family: 'Poppins', sans-serif;
        }
        .pro-card {
            background: #ffffff;
            border: 1px solid #e2e8f0;
            border-radius: 0.75rem;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
        }
        .pro-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }
        .race-nav-btn {
            transition: all 0.2s ease-in-out;
            color: #334155;
            border-bottom: 3px solid transparent;
            padding: 0.75rem 1rem;
        }
        .race-nav-btn.active {
            color: #0d47a1;
            border-bottom-color: #42a5f5;
        }
        .race-nav-btn:not(.active):hover {
            background-color: #e3f2fd;
        }
        .pace-tag {
            display: inline-flex;
            align-items: center;
            gap: 0.4rem;
            padding: 0.3rem 0.8rem;
            border-radius: 9999px;
            font-weight: 600;
            font-size: 0.8rem;
        }
        .pace-duel { background-color: #ffebee; color: #c62828; }
        .pace-contested { background-color: #fff8e1; color: #f9a825; }
        .pace-void { background-color: #e3f2fd; color: #1565c0; }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
        .lucide {
            width: 22px;
            height: 22px;
        }
        .header-btn {
            transition: all 0.2s ease-in-out;
        }
        .race-link-card {
            background-color: #ffffff;
            border: 1px solid #e2e8f0;
            border-radius: 0.5rem;
            padding: 1rem;
            text-align: center;
            font-weight: 600;
            color: #0d47a1;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
        }
        .race-link-card:hover {
            background-color: #0d47a1;
            color: #ffffff;
            transform: scale(1.05);
        }
    </style>
</head>
<body>

    <header class="bg-white border-b border-gray-200 py-3 sticky top-0 z-20">
        <div class="container mx-auto px-4 flex justify-between items-center">
            <div class="flex items-center gap-4">
                 <div>
                    <h1 class="text-2xl font-bold text-[#0d47a1] font-poppins">Saratoga Dashboard</h1>
                    <p class="text-md text-gray-500">Value-Driven Insights for August 23, 2025</p>
                 </div>
            </div>
            <div class="flex items-center gap-2">
                <a href="#" onclick="showHome(); event.preventDefault();" class="header-btn flex items-center gap-2 px-4 py-2 rounded-lg font-semibold text-white bg-[#0d47a1] hover:bg-[#1565c0]">
                    <i data-lucide="home" class="h-5 w-5"></i>
                    Home
                </a>
                <a href="#" onclick="showHome(); event.preventDefault();" class="header-btn flex items-center gap-2 px-4 py-2 rounded-lg font-semibold text-[#0d47a1] bg-white border border-[#0d47a1] hover:bg-blue-50">
                    <i data-lucide="layout-dashboard" class="h-5 w-5"></i>
                    Dashboard
                </a>
            </div>
        </div>
    </header>

    <main class="container mx-auto p-4 md:p-6">
        
        <div id="home-page">
            <section id="executive-summary" class="mb-10">
                <h2 class="text-2xl font-poppins font-bold mb-5 text-center text-[#0d47a1]">Executive Summary</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-5">
                    
                    <div class="pro-card p-5 text-center cursor-pointer" onclick="showRace(5)">
                        <div class="flex flex-col items-center">
                            <div class="bg-green-100 text-green-700 rounded-full p-3 mb-3">
                                <i data-lucide="star" class="lucide"></i>
                            </div>
                            <h3 class="font-poppins font-semibold text-lg text-[#0d47a1] mb-1">Prime Bet</h3>
                            <p class="text-gray-800 font-semibold">Race 5, #10 Silsbee</p>
                            <p class="text-sm text-gray-500 mt-1">Strongest value overlay on the card.</p>
                        </div>
                    </div>
                    
                    <div class="pro-card p-5 text-center cursor-pointer" onclick="showRace(13)">
                        <div class="flex flex-col items-center">
                            <div class="bg-blue-100 text-blue-700 rounded-full p-3 mb-3">
                                <i data-lucide="target" class="lucide"></i>
                            </div>
                            <h3 class="font-poppins font-semibold text-lg text-[#0d47a1] mb-1">Key Single</h3>
                            <p class="text-gray-800 font-semibold">Race 13, #4 Sovereignty</p>
                            <p class="text-sm text-gray-500 mt-1">Most probable winner of the day.</p>
                        </div>
                    </div>
                    
                    <div class="pro-card p-5 text-center">
                           <div class="flex flex-col items-center">
                                <div class="bg-yellow-100 text-yellow-700 rounded-full p-3 mb-3">
                                    <i data-lucide="lightbulb" class="lucide"></i>
                                </div>
                                <h3 class="font-poppins font-semibold text-lg text-[#0d47a1] mb-1">Value Plays</h3>
                                <ul class="text-gray-600 mt-2 space-y-2 text-sm">
                                    <li class="cursor-pointer hover:text-blue-600 font-medium" onclick="showRace(1)"><strong>R1, #6 Bottas</strong></li>
                                    <li class="cursor-pointer hover:text-blue-600 font-medium" onclick="showRace(6)"><strong>R6, #6 Vino Vici</strong></li>
                                    <li class="cursor-pointer hover:text-blue-600 font-medium" onclick="showRace(8)"><strong>R8, #8 Loveumissumeanit</strong></li>
                                    <li class="cursor-pointer hover:text-blue-600 font-medium" onclick="showRace(12)"><strong>R12, #2 Bishops Bay</strong></li>
                                </ul>
                           </div>
                    </div>

                    <div class="pro-card p-5 text-center">
                        <div class="flex flex-col items-center">
                            <div class="bg-red-100 text-red-700 rounded-full p-3 mb-3">
                                <i data-lucide="thumbs-down" class="lucide"></i>
                            </div>
                            <h3 class="font-poppins font-semibold text-lg text-[#0d47a1] mb-1">Top Fades</h3>
                            <ul class="text-gray-600 mt-2 space-y-2 text-sm">
                                <li class="cursor-pointer hover:text-blue-600 font-medium" onclick="showRace(11)"><strong>R11, #7 Scylla</strong></li>
                                <li class="cursor-pointer hover:text-blue-600 font-medium" onclick="showRace(14)"><strong>R14, #1 Dancin Jane</strong></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <section id="race-navigation-home">
                    <h2 class="text-2xl font-poppins font-bold mb-5 text-center text-[#0d47a1]">Race-by-Race Analysis</h2>
                    <div id="race-link-container" class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-8 gap-3">
                    </div>
            </section>
        </div>

        <div id="race-page" class="hidden">
            <nav class="bg-white rounded-lg shadow-sm mb-8 border border-gray-200">
                <div id="race-nav-container" class="flex flex-wrap justify-center">
                </div>
            </nav>
            <div id="race-details-container"></div>
        </div>

    </main>

    <footer class="text-center p-6 mt-8 text-gray-500 text-sm border-t border-gray-200">
        <p>This interactive dashboard is for informational and entertainment purposes only. Please wager responsibly.</p>
    </footer>

    <script>
        // TEMPLATE INSTRUCTIONS:
        // To use this template for a new race card, simply replace the placeholder
        // data in the `raceData` object below with your own analysis.
        // The number of races will be dynamically generated based on the number of
        // entries in the `raceData` object.
        
        const raceData = {
            1: {
                meta: "Race 1: Maiden Special Weight, 1 1/16 Miles (Turf), Purse $100,000",
                pace: { type: "Moderately Contested", class: "pace-contested", text: "With a field of debut runners, the pace is speculative. Pedigrees suggest multiple horses will show speed, leading to an honest pace that should favor a horse with a balanced, tactical running style." },
                thesis: "This race will be won by the most talented and well-prepared first-time starter. The focus is on pedigree, trainer stats, and workout patterns.",
                spoiler: "A previously raced horse with a troubled trip improves dramatically in its second start, or a longshot debut runner from a less-heralded barn shows unexpected talent.",
                chart: {
                    labels: ['#3 Franklin Delano', '#6 Bottas', '#2 Ambassador Blue'],
                    implied: [18.2, 22.2, 0],
                    assessed: [22, 25, 15]
                },
                wagers: {
                    primary: "Exacta Box: 3, 6.",
                    exotics: "",
                    horizontal: "'A' Horses: 3, 6."
                }
            },
            2: {
                meta: "Race 2: Allowance Optional Claiming, 1 3/16 Miles (Turf), Purse $115,000",
                pace: { type: "Moderately Contested", class: "pace-contested", text: "Several horses possess early speed, ensuring an honest pace. This setup could favor off-the-pace runners, especially with the tactical advantage of the #1/#1A Chad Brown entry." },
                thesis: "A competitive race where class-droppers meet in-form rivals. An honest pace will favor a horse with a clean trip and a strong finishing kick.",
                spoiler: "A deep closer gets a perfect setup with a fast pace, or one of the tactical speed horses gets an uncontested lead and is too good to be caught.",
                chart: {
                    labels: ['#7 Crystal Quest', '#3 Then', '#8 Vesting (ire)'],
                    implied: [28.6, 22.2, 25.0],
                    assessed: [35, 25, 28]
                },
                wagers: {
                    primary: "Exacta: 7 with 3, 8.",
                    exotics: "Trifecta: Key 7 over 3, 8.",
                    horizontal: "'A' Horses: 7, 1."
                }
            },
            3: {
                meta: "Race 3: Maiden Special Weight, 6 1/2 Furlongs, Purse $100,000",
                pace: { type: "Moderately Contested", class: "pace-contested", text: "A field of well-bred first-time starters suggests a competitive pace from the start. A filly that can rate just off the early speed will have an advantage." },
                thesis: "A showdown of blue-blooded first-time starters. The winner will be the one with the most raw talent and professional preparation.",
                spoiler: "A longshot debut runner with a lesser-known pedigree or connections pulls a major upset.",
                chart: {
                    labels: ['#3 Touch Of Magic', '#8 Tam Tam'],
                    implied: [25.0, 23.8],
                    assessed: [35, 30]
                },
                wagers: {
                    primary: "Exacta Box: 3, 8.",
                    exotics: "",
                    horizontal: "'A' Horse: 3, 'B' Horse: 8."
                }
            },
            4: {
                meta: "Race 4: Maiden Special Weight (NY-Bred), 6 Furlongs, Purse $90,000",
                pace: { type: "Pressured Duel", class: "pace-duel", text: "An abundance of early speed projects a fast and taxing early pace. This race shape strongly favors horses that can close from off the pace." },
                thesis: "The intense pace battle will likely cause the front-runners to tire, setting the race up perfectly for a closer to capitalize in the stretch.",
                spoiler: "A lone speed horse gets an easy lead and holds on to steal the race.",
                chart: {
                    labels: ['#10 Merica\'s Back', '#7 Keepinitreal', '#8 Call Bob'],
                    implied: [20.0, 14.3, 12.5],
                    assessed: [30, 28, 20]
                },
                wagers: {
                    primary: "Exacta Box: 10, 7, 8.",
                    exotics: "",
                    horizontal: "'A' Horses: 10, 7."
                }
            },
            5: {
                meta: "Race 5: Allowance, 5 1/2 Furlongs (Turf), Purse $95,000",
                pace: { type: "Pressured Duel", class: "pace-duel", text: "A large field sprinting on the turf almost guarantees a fast, contested pace. This scenario puts a premium on energy conservation and a strong late kick." },
                thesis: "A pace collapse is highly likely, creating a perfect setup for a deep closer to rally past tiring leaders. Look for a horse with a history of finishing strongly.",
                spoiler: "A lone speed horse gets an easy lead and is too good to be caught.",
                chart: {
                    labels: ['#10 Silsbee', '#7 Olivia\'s Grace'],
                    implied: [25.0, 14.3],
                    assessed: [35, 20]
                },
                wagers: {
                    primary: "Exacta Box: 7, 10.",
                    exotics: "Trifecta: Key 7, 10 over the field.",
                    horizontal: "'A' Horses: 7, 10."
                }
            },
            6: {
                meta: "Race 6: Maiden Special Weight, 6 Furlongs, Purse $100,000",
                pace: { type: "Lone/Uncontested", class: "pace-void", text: "#6 Vino Vici is the only horse with race experience and could secure an easy, uncontested lead, giving him a major tactical advantage over the debut runners." },
                thesis: "A classic matchup between an experienced runner with a promising, troubled debut (#6) and a flashy, well-regarded first-time starter (#5).",
                spoiler: "A longshot first-time starter runs a big race and wins.",
                chart: {
                    labels: ['#5 Big Dom', '#6 Vino Vici', '#9 Old Time Rocknroll'],
                    implied: [28.6, 25.0, 14.3],
                    assessed: [35, 32, 20]
                },
                wagers: {
                    primary: "Exacta Box: 5, 6.",
                    exotics: "Trifecta: Key 5, 6 over 3, 9.",
                    horizontal: "'A' Horses: 5, 6."
                }
            },
            7: {
                meta: "Race 7: G2 Lake Placid S., 1 Mile (Turf), Purse $400,000",
                pace: { type: "Moderately Contested", class: "pace-contested", text: "A small, elite field suggests a tactical pace. The race will likely be decided by finishing speed rather than being dictated by a taxing early pace." },
                thesis: "A high-class G2 where the filly dropping from G1 company (#3 May Day Ready) holds a significant class advantage and is poised for a top effort.",
                spoiler: "The pace collapses, allowing a deep closer to win.",
                chart: {
                    labels: ['#3 May Day Ready', '#1 Play With Fire', '#6 Reining Flowers'],
                    implied: [25.0, 33.3, 14.3],
                    assessed: [40, 35, 25]
                },
                wagers: {
                    primary: "Exacta Box: 1, 3.",
                    exotics: "Trifecta: Key 1, 3 over 6.",
                    horizontal: "'A' Horses: 1, 3."
                }
            },
            8: {
                meta: "Race 8: Allowance, 1 1/16 Miles (Turf), Purse $95,000",
                pace: { type: "Moderately Contested", class: "pace-contested", text: "A large field ensures an honest pace, which will favor horses that can settle mid-pack and make a sustained run, avoiding traffic trouble." },
                thesis: "In a large, competitive field, a clean trip and a strong closing kick will be decisive. The winner will likely come from off the pace.",
                spoiler: "A lone speed horse gets an easy lead and holds on to steal the race.",
                chart: {
                    labels: ['#6 Dividend Recap', '#2 Gallant Greta', '#8 Loveumissumeanit', '#12 Tongue Twister'],
                    implied: [20.0, 16.7, 14.3, 12.5],
                    assessed: [30, 28, 25, 22]
                },
                wagers: {
                    primary: "Exacta Box: 2, 6.",
                    exotics: "Trifecta keying 2 and 6 over 8 and 10.",
                    horizontal: "'A' Horses: 2, 6."
                }
            },
            9: {
                meta: "Race 9: G1 Personal Ensign S., 1 1/8 Miles, Purse $500,000",
                pace: { type: "Moderately Contested", class: "pace-contested", text: "A tactical affair is expected. Champion #7 Thorpedo Anna is versatile enough to adapt to any pace scenario, but the race will test who has the most class in the final furlong." },
                thesis: "A showdown between a proven champion (#7 Thorpedo Anna) and an improving, high-class challenger (#6 Leslie's Rose). While the champ is formidable, she is not unbeatable.",
                spoiler: "A speed horse (#1 Randomized) gets an uncontested lead and never looks back.",
                chart: {
                    labels: ['#7 Thorpedo Anna', '#6 Leslie\'s Rose', '#3 Raging Sea'],
                    implied: [45.5, 28.6, 20.0],
                    assessed: [45, 35, 20]
                },
                wagers: {
                    primary: "Exacta Box: 7, 6.",
                    exotics: "Trifecta keying 7 and 6 over 3.",
                    horizontal: "'A' Horses: 7, 6."
                }
            },
            10: {
                meta: "Race 10: G1 H. Allen Jerkens Memorial S., 7 Furlongs, Purse $500,000",
                pace: { type: "Pressured Duel", class: "pace-duel", text: "A significant amount of early speed projects a fast, taxing pace. This race shape is highly favorable for stalkers and closers who can capitalize on tiring leaders." },
                thesis: "The intense pace duel on the front end will set the table for a horse with a powerful late kick. The winner will come from off the pace.",
                spoiler: "A lone speed horse gets an uncontested lead and never looks back.",
                chart: {
                    labels: ['#5 Verifire', '#2 Midland Money', '#1 Patch Adams', '#6 Smoken Wicked'],
                    implied: [28.6, 25.0, 20.0, 16.7],
                    assessed: [35, 30, 25, 20]
                },
                wagers: {
                    primary: "Exacta Box: 2, 5.",
                    exotics: "Trifecta keying 2 and 5 over 1 and 6.",
                    horizontal: "'A' Horses: 2, 5."
                }
            },
            11: {
                meta: "Race 11: G1 Resorts World Casino Ballerina S., 7 Furlongs, Purse $500,000",
                pace: { type: "Moderately Contested", class: "pace-contested", text: "Enough speed is present to ensure an honest pace, preventing any single horse from stealing it on the front end. This favors horses with tactical speed who can get a good stalking trip." },
                thesis: "A competitive G1 sprint where the winner will need both class and a clean trip. The pace scenario favors a horse that can sit just behind the leaders and pounce in the stretch.",
                spoiler: "A lone speed horse gets an uncontested lead and never looks back.",
                chart: {
                    labels: ['#9 Hope Road', '#2 Brightwork', '#7 Scylla'],
                    implied: [25.0, 22.2, 28.6],
                    assessed: [40, 35, 25]
                },
                wagers: {
                    primary: "Exacta Box: 9, 2.",
                    exotics: "Trifecta keying 9 and 2 over 7.",
                    horizontal: "'A' Horses: 9, 2."
                }
            },
            12: {
                meta: "Race 12: G1 Forego S., 7 Furlongs, Purse $500,000",
                pace: { type: "Pressured Duel", class: "pace-duel", text: "Multiple high-quality speed horses ensure a blistering pace. This is a classic setup for a pace collapse, strongly favoring horses with a proven closing kick." },
                thesis: "The destructive front-end speed duel will compromise the chances of the favorites, creating a prime opportunity for a stalker or closer to win at a price.",
                spoiler: "A lone speed horse gets an uncontested lead and never looks back.",
                chart: {
                    labels: ['#2 Bishops Bay', '#4 Book\'em Danno', '#1 Three Technique', '#11 Post Time'],
                    implied: [14.3, 38.5, 12.5, 14.3],
                    assessed: [35, 30, 15, 20]
                },
                wagers: {
                    primary: "Exacta Box: 2, 4.",
                    exotics: "Trifecta keying 2 and 4 over 1, 3, and 11.",
                    horizontal: "'A' Horses: 2, 4."
                }
            },
            13: {
                meta: "Race 13: G1 DraftKings Travers S., 1 1/4 Miles, Purse $1,250,000",
                pace: { type: "Moderately Contested", class: "pace-contested", text: "A small, tactical field where #1 Magnitude is the likely pacesetter. The race will be a test of class and stamina, not raw speed." },
                thesis: "In the 'Mid-Summer Derby,' the superior class and proven stamina of dual Classic winner #4 Sovereignty make him the horse to beat. The race shape is unlikely to compromise him.",
                spoiler: "#1 Magnitude gets a loose, uncontested lead and steals the race.",
                chart: {
                    labels: ['#4 Sovereignty', '#3 Strategic Focus'],
                    implied: [71.4, 14.3],
                    assessed: [65, 15]
                },
                wagers: {
                    primary: "Exacta: 4 over 1, 3.",
                    exotics: "",
                    horizontal: "'A' Horse (Single): 4."
                }
            },
            14: {
                meta: "Race 14: Maiden Claiming, 1 Mile (Turf), Purse $50,000",
                pace: { type: "Moderately Contested", class: "pace-contested", text: "A large field of inconsistent runners makes for a potentially messy pace. A clean trip and the ability to finish will be more important than early speed." },
                thesis: "A wide-open maiden claiming finale. The winner will likely be a horse that can stay out of trouble and make one sustained run, potentially at a long price.",
                spoiler: "A horse gets an uncontested lead and never looks back.",
                chart: {
                    labels: ['#1 Dancin Jane', '#2 Amelia', '#3 Argentiera', '#4 Bank On Bebe'],
                    implied: [28.6, 14.3, 14.3, 14.3],
                    assessed: [20, 15, 15, 15]
                },
                wagers: {
                    primary: "Exacta Box: 1, 2, 3, 4.",
                    exotics: "",
                    horizontal: "'A' Horse: 1."
                }
            }
        };

        let currentChart = null;

        const homePage = document.getElementById('home-page');
        const racePage = document.getElementById('race-page');
        const raceDetailsContainer = document.getElementById('race-details-container');

        function showHome() {
            homePage.classList.remove('hidden');
            racePage.classList.add('hidden');
            window.scrollTo(0, 0);
        }

        function showRace(raceNumber) {
            const race = raceData[raceNumber];
            if (!race) return;

            homePage.classList.add('hidden');
            racePage.classList.remove('hidden');

            raceDetailsContainer.innerHTML = `
                <div id="race-${raceNumber}" class="race-content pro-card p-5 md:p-6">
                    <div class="border-b border-gray-200 pb-4 mb-4">
                        <h2 class="font-poppins text-2xl font-bold text-[#0d47a1]">${race.meta}</h2>
                        <div class="mt-2 flex items-center">
                            <span class="pace-tag ${race.pace.class}">
                                <i data-lucide="wind" class="h-4 w-4"></i>
                                ${race.pace.type}
                            </span>
                            <p class="text-gray-600 ml-3 text-sm">${race.pace.text}</p>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-5 gap-6">
                        <div class="lg:col-span-3">
                            <h3 class="font-poppins text-xl font-semibold mb-2 text-[#0d47a1]">Value Analysis: Probability vs. Price</h3>
                            <p class="text-sm text-gray-500 mb-3">Comparing implied win probability (from odds) with our assessed probability. A taller "Assessed" bar indicates a potential value overlay.</p>
                            <div class="chart-container">
                                <canvas id="raceChart"></canvas>
                            </div>
                        </div>
                        <div class="lg:col-span-2 bg-slate-50 p-4 rounded-lg border border-gray-200">
                            <h3 class="font-poppins text-xl font-semibold mb-3 text-[#0d47a1]">Strategic Breakdown</h3>
                            <div class="space-y-4">
                                <div>
                                    <h4 class="font-semibold text-gray-700 flex items-center"><i data-lucide="brain-circuit" class="mr-2 h-5 w-5 text-blue-500"></i>Primary Thesis:</h4>
                                    <p class="text-gray-600 text-sm mt-1 pl-7">${race.thesis}</p>
                                </div>
                                <div>
                                    <h4 class="font-semibold text-gray-700 flex items-center"><i data-lucide="alert-triangle" class="mr-2 h-5 w-5 text-yellow-500"></i>Spoiler Scenario:</h4>
                                    <p class="text-gray-600 text-sm mt-1 pl-7">${race.spoiler}</p>
                                </div>
                                <div>
                                    <h4 class="font-semibold text-gray-700 flex items-center"><i data-lucide="dollar-sign" class="mr-2 h-5 w-5 text-green-500"></i>Wager Construction:</h4>
                                    <ul class="list-disc list-inside text-sm text-gray-600 space-y-1 mt-2 pl-7">
                                        <li><strong>Primary:</strong> ${race.wagers.primary}</li>
                                        <li><strong>Exotics:</strong> ${race.wagers.exotics || "Not recommended."}</li>
                                        <li><strong>Horizontal:</strong> ${race.wagers.horizontal}</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            lucide.createIcons();
            renderChart(race.chart);
            updateActiveNav(raceNumber);
            window.scrollTo(0, 0);
        }

        function renderChart(chartData) {
            const ctx = document.getElementById('raceChart').getContext('2d');
            
            if (currentChart) {
                currentChart.destroy();
            }

            currentChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: chartData.labels,
                    datasets: [
                        {
                            label: 'Implied Probability (Odds)',
                            data: chartData.implied,
                            backgroundColor: '#90caf9',
                            borderColor: '#42a5f5',
                            borderWidth: 1,
                            borderRadius: 4
                        },
                        {
                            label: 'Assessed Probability (Analysis)',
                            data: chartData.assessed,
                            backgroundColor: '#455a64',
                            borderColor: '#1e2b33',
                            borderWidth: 1,
                            borderRadius: 4
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: {
                                color: '#e0e0e0'
                            },
                            ticks: {
                                color: '#334155'
                            },
                            title: {
                                display: true,
                                text: 'Win Probability (%)',
                                color: '#334155',
                                font: {
                                    family: "'Roboto', sans-serif"
                                }
                            }
                        },
                        x: {
                                grid: {
                                    display: false
                                },
                                ticks: {
                                    color: '#334155'
                                }
                        }
                    },
                    plugins: {
                        legend: {
                            position: 'top',
                            labels: {
                                color: '#334155',
                                font: {
                                    family: "'Roboto', sans-serif"
                                }
                            }
                        },
                        tooltip: {
                            backgroundColor: '#0d47a1',
                            titleColor: '#ffffff',
                            bodyColor: '#ffffff',
                            titleFont: { family: "'Poppins', sans-serif" },
                            bodyFont: { family: "'Roboto', sans-serif" },
                            callbacks: {
                                label: function(context) {
                                    let label = context.dataset.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    if (context.parsed.y !== null) {
                                        label += context.parsed.y + '%';
                                    }
                                    return label;
                                }
                            }
                        }
                    }
                }
            });
        }

        function updateActiveNav(raceNumber) {
            const buttons = document.querySelectorAll('.race-nav-btn');
            buttons.forEach(btn => {
                if (btn.dataset.race === raceNumber.toString()) {
                    btn.classList.add('active', 'font-bold');
                } else {
                    btn.classList.remove('active', 'font-bold');
                }
            });
        }

        function initializeApp() {
            const raceLinkContainer = document.getElementById('race-link-container');
            const navContainer = document.getElementById('race-nav-container');
            const raceKeys = Object.keys(raceData);

            raceLinkContainer.innerHTML = '';
            navContainer.innerHTML = '';

            for (const raceKey of raceKeys) {
                const raceLink = document.createElement('div');
                raceLink.className = 'race-link-card';
                raceLink.textContent = `Race ${raceKey}`;
                raceLink.onclick = () => showRace(raceKey);
                raceLinkContainer.appendChild(raceLink);

                const navButton = document.createElement('button');
                navButton.textContent = `Race ${raceKey}`;
                navButton.dataset.race = raceKey;
                navButton.className = 'race-nav-btn font-semibold';
                navButton.onclick = () => showRace(raceKey);
                navContainer.appendChild(navButton);
            }
            lucide.createIcons();
            showHome();
        }

        window.onload = initializeApp;
    </script>
</body>
</html>
